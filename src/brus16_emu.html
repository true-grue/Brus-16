<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<title>Brus-16</title>
<style>
body { text-align: center; }
canvas { display: block; margin: 0 auto; }
.ui { margin-top: 1em; }
</style>
</head>
<body>
<canvas id='canvas'></canvas>
<div class="ui">
<select id='game'>
<option value='logo.bin'>Logo</option>
<option value='racing.bin'>Racing</option>
<option value='flippy.bin'>Flippy</option>
<option value='pong.bin'>Pong</option>
<option value='ping.bin'>Ping</option>
<option value='tower.bin'>Tower</option>
<option value='alterego.bin'>Alter Ego</option>
<option value='gerion.bin'>Gerion</option>
<option value='donkey.bin'>Donkey</option>
<option value='robot.bin'>Robot</option>
<option value='zoom.bin'>Zoom</option>
</select>
</div>
<p>Controls: Arrows, ZXCV</p>
<script type='text/javascript'>
window.onload = function() {
  const canvas = document.getElementById('canvas');
  const select = document.getElementById('game');
  let instance = null;
  function run() {
    canvas.width = canvas.width;   
    Module({
      canvas: canvas,
      arguments: [select.value]
    }).then(inst => { instance = inst; });
  }
  window.on_quit = function() {
    instance = null;
    run();
  };
  function on_change() {
    if (instance) {
      instance._quit(); 
    } else {
      run();
    }
  }
  select.addEventListener('change', on_change);
  on_change();
};
</script>
{{{ SCRIPT }}}
</body>
</html>
